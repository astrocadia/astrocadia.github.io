import{_ as ne,a as _}from"./ThemeProviderWrapper-Be5RUURM.js";import{r as p}from"./index-Dl6G-zuu.js";import{b as re,c as le,s as K,u as ce,e as ue,f as de}from"./styled-Dt2_JBRt.js";import{s as me,S as _e,D as Ne,b as Re,E as Le,d as Pe,F as Oe,G as te,H as se,c as Fe}from"./valueManagers-DfxpBv93.js";import{a as He,M as Ee,P as $e,u as je,b as Ae}from"./PickerViewRoot-UUSpvxtv.js";import{j as N}from"./jsx-runtime-4WDyTGeM.js";import{M as Ue}from"./MenuList-CRTvLIIN.js";import{M as We}from"./MenuItem-pwvj7SPr.js";import{u as ze}from"./useForkRef-BDoLG09A.js";import{a as oe}from"./colorManipulator-CE5bNU3Z.js";import{b as Y}from"./useTimeout-B4b6mSVs.js";import{c as Ge}from"./index-eOQoo3sK.js";import{M as qe}from"./MenuItem-BQL84gbW.js";import{B as Be}from"./Button-CqlPB7zF.js";const Ye=({value:e,referenceDate:i,utils:n,props:t,timezone:r})=>{const l=p.useMemo(()=>me.getInitialReferenceValue({value:e,utils:n,props:t,referenceDate:i,granularity:_e.day,timezone:r,getTodayDate:()=>Ne(n,r,"date")}),[]);return e??l};function Ke(e){return le("MuiMultiSectionDigitalClock",e)}re("MuiMultiSectionDigitalClock",["root"]);function Je(e){return le("MuiMultiSectionDigitalClock",e)}const Mt=re("MuiMultiSectionDigitalClock",["root","item"]),Qe=["autoFocus","onChange","className","disabled","readOnly","items","active","slots","slotProps","skipDisabled"],Xe=e=>{const{classes:i}=e;return de({root:["root"],item:["item"]},Je,i)},Ze=K(Ue,{name:"MuiMultiSectionDigitalClockSection",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e,ownerState:i})=>({maxHeight:He,width:56,padding:0,overflow:"hidden","@media (prefers-reduced-motion: no-preference)":{scrollBehavior:i.alreadyRendered?"smooth":"auto"},"&:hover":{overflowY:"auto"},"&:not(:first-of-type)":{borderLeft:`1px solid ${(e.vars||e).palette.divider}`},"&:after":{display:"block",content:'""',height:"calc(100% - 40px - 6px)"}})),et=K(We,{name:"MuiMultiSectionDigitalClockSection",slot:"Item",overridesResolver:(e,i)=>i.item})(({theme:e})=>({padding:8,margin:"2px 4px",width:Ee,justifyContent:"center","&:first-of-type":{marginTop:4},"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:oe(e.palette.primary.main,e.palette.action.hoverOpacity)},"&.Mui-selected":{backgroundColor:(e.vars||e).palette.primary.main,color:(e.vars||e).palette.primary.contrastText,"&:focus-visible, &:hover":{backgroundColor:(e.vars||e).palette.primary.dark}},"&.Mui-focusVisible":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.focusOpacity})`:oe(e.palette.primary.main,e.palette.action.focusOpacity)}})),tt=p.forwardRef(function(i,n){var t;const r=p.useRef(null),l=ze(n,r),g=p.useRef(null),u=ce({props:i,name:"MuiMultiSectionDigitalClockSection"}),{autoFocus:h,onChange:S,className:T,disabled:d,readOnly:C,items:R,active:E,slots:L,slotProps:x,skipDisabled:P}=u,$=ne(u,Qe),O=p.useMemo(()=>_({},u,{alreadyRendered:!!r.current}),[u]),j=Xe(O),F=(t=L==null?void 0:L.digitalClockSectionItem)!=null?t:et;return p.useEffect(()=>{if(r.current===null)return;const o=r.current.querySelector('[role="option"][aria-selected="true"]');if(!o||g.current===o){g.current!==o&&(g.current=o);return}g.current=o,E&&h&&o.focus();const w=o.offsetTop;r.current.scrollTop=w-4}),N.jsx(Ze,_({ref:l,className:ue(j.root,T),ownerState:O,autoFocusItem:h&&E,role:"listbox"},$,{children:R.map(o=>{var w,A;if(P&&(w=o.isDisabled)!=null&&w.call(o,o.value))return null;const M=o.isSelected(o.value);return N.jsx(F,_({onClick:()=>!C&&S(o.value),selected:M,disabled:d||((A=o.isDisabled)==null?void 0:A.call(o,o.value)),disableRipple:C,role:"option","aria-disabled":C,"aria-label":o.ariaLabel,"aria-selected":M},x==null?void 0:x.digitalClockSectionItem,{children:o.label}),o.label)})}))}),st=({now:e,value:i,utils:n,ampm:t,isDisabled:r,resolveAriaLabel:l,timeStep:g})=>{const u=i?n.getHours(i):null,h=[],S=d=>u===null?!1:t?d===12?u===12||u===0:u===d||u-12===d:u===d,T=t?11:23;for(let d=0;d<=T;d+=g){let C=n.format(n.setHours(e,d),t?"hours12h":"hours24h");const R=l(parseInt(C,10).toString());C=n.formatNumber(C),h.push({value:d,label:C,isSelected:S,isDisabled:r,ariaLabel:R})}return h},ie=({value:e,isDisabled:i,timeStep:n,resolveLabel:t,resolveAriaLabel:r,hasValue:l=!0})=>{const g=u=>e===null?!1:l&&e===u;return[...Array.from({length:Math.ceil(60/n)},(u,h)=>{const S=n*h;return{value:S,label:t(S),isDisabled:i,isSelected:g,ariaLabel:r(S.toString())}})]},ot=["ampm","timeSteps","autoFocus","components","componentsProps","slots","slotProps","value","defaultValue","referenceDate","disableIgnoringDatePartForTimeValidation","maxTime","minTime","disableFuture","disablePast","minutesStep","shouldDisableClock","shouldDisableTime","onChange","view","views","openTo","onViewChange","focusedView","onFocusedViewChange","className","disabled","readOnly","skipDisabled","timezone"],it=e=>{const{classes:i}=e;return de({root:["root"]},Ke,i)},at=K($e,{name:"MuiMultiSectionDigitalClock",slot:"Root",overridesResolver:(e,i)=>i.root})(({theme:e})=>({display:"flex",flexDirection:"row",width:"100%",borderBottom:`1px solid ${(e.vars||e).palette.divider}`})),vt=p.forwardRef(function(i,n){const t=Re(),r=ce({props:i,name:"MuiMultiSectionDigitalClock"}),{ampm:l=t.is12HourCycleInCurrentLocale(),timeSteps:g,autoFocus:u,components:h,componentsProps:S,slots:T,slotProps:d,value:C,defaultValue:R,referenceDate:E,disableIgnoringDatePartForTimeValidation:L=!1,maxTime:x,minTime:P,disableFuture:$,disablePast:O,minutesStep:j=1,shouldDisableClock:F,shouldDisableTime:o,onChange:w,view:A,views:M=["hours","minutes"],openTo:fe,onViewChange:pe,focusedView:ge,onFocusedViewChange:Ce,className:be,disabled:H,readOnly:he,skipDisabled:Se=!1,timezone:Me}=r,ve=ne(r,ot),{value:v,handleValueChange:De,timezone:J}=Le({name:"MultiSectionDigitalClock",timezone:Me,value:C,defaultValue:R,onChange:w,valueManager:me}),D=Pe(),k=Oe(J),I=p.useMemo(()=>_({hours:1,minutes:5,seconds:5},g),[g]),m=Ye({value:v,referenceDate:E,utils:t,props:r,timezone:J}),ke=Y((a,s,f)=>De(a,s,f)),y=p.useMemo(()=>!l||!M.includes("hours")||M.includes("meridiem")?M:[...M,"meridiem"],[l,M]),{view:ye,setValueAndGoToView:Q,focusedView:Te}=je({view:A,views:y,openTo:fe,onViewChange:pe,onChange:ke,focusedView:ge,onFocusedViewChange:Ce}),xe=Y(a=>{Q(a,null,"meridiem")}),{meridiemMode:V,handleMeridiemChange:X}=Ae(m,l,xe,"finish"),U=p.useCallback((a,s)=>{const f=Fe(L,t),G=s==="hours"||s==="minutes"&&y.includes("seconds"),q=({start:c,end:b})=>!(P&&f(P,b)||x&&f(c,x)||$&&f(c,k)||O&&f(k,G?b:c)),B=(c,b=1)=>{if(c%b!==0||F!=null&&F(c,s))return!1;if(o)switch(s){case"hours":return!o(t.setHours(m,c),"hours");case"minutes":return!o(t.setMinutes(m,c),"minutes");case"seconds":return!o(t.setSeconds(m,c),"seconds");default:return!1}return!0};switch(s){case"hours":{const c=se(a,V,l),b=t.setHours(m,c),z=t.setSeconds(t.setMinutes(b,0),0),Ve=t.setSeconds(t.setMinutes(b,59),59);return!q({start:z,end:Ve})||!B(c)}case"minutes":{const c=t.setMinutes(m,a),b=t.setSeconds(c,0),z=t.setSeconds(c,59);return!q({start:b,end:z})||!B(a,j)}case"seconds":{const c=t.setSeconds(m,a);return!q({start:c,end:c})||!B(a)}default:throw new Error("not supported")}},[l,m,L,x,V,P,j,F,o,t,$,O,k,y]),W=Y((a,s)=>{const f=y.indexOf(a),G=y[f+1];Q(s,G,a)}),Z=p.useCallback(a=>{switch(a){case"hours":return{onChange:s=>{const f=se(s,V,l);W("hours",t.setHours(m,f))},items:st({now:k,value:v,ampm:l,utils:t,isDisabled:s=>H||U(s,"hours"),timeStep:I.hours,resolveAriaLabel:D.hoursClockNumberText})};case"minutes":return{onChange:s=>{W("minutes",t.setMinutes(m,s))},items:ie({value:t.getMinutes(m),isDisabled:s=>H||U(s,"minutes"),resolveLabel:s=>t.format(t.setMinutes(k,s),"minutes"),timeStep:I.minutes,hasValue:!!v,resolveAriaLabel:D.minutesClockNumberText})};case"seconds":return{onChange:s=>{W("seconds",t.setSeconds(m,s))},items:ie({value:t.getSeconds(m),isDisabled:s=>H||U(s,"seconds"),resolveLabel:s=>t.format(t.setSeconds(k,s),"seconds"),timeStep:I.seconds,hasValue:!!v,resolveAriaLabel:D.secondsClockNumberText})};case"meridiem":{const s=te(t,"am"),f=te(t,"pm");return{onChange:X,items:[{value:"am",label:s,isSelected:()=>!!v&&V==="am",ariaLabel:s},{value:"pm",label:f,isSelected:()=>!!v&&V==="pm",ariaLabel:f}]}}default:throw new Error(`Unknown view: ${a} found.`)}},[k,v,l,t,I.hours,I.minutes,I.seconds,D.hoursClockNumberText,D.minutesClockNumberText,D.secondsClockNumberText,V,W,m,H,U,X]),we=p.useMemo(()=>y.reduce((a,s)=>_({},a,{[s]:Z(s)}),{}),[y,Z]),ee=r,Ie=it(ee);return N.jsx(at,_({ref:n,className:ue(Ie.root,be),ownerState:ee,role:"group"},ve,{children:Object.entries(we).map(([a,s])=>N.jsx(tt,{items:s.items,onChange:s.onChange,active:ye===a,autoFocus:u??Te===a,disabled:H,readOnly:he,slots:T??h,slotProps:d??S,skipDisabled:Se,"aria-label":D.selectViewText(a)},a))}))}),ae=({children:e,className:i,disabled:n,selected:t,...r})=>{const l=p.useMemo(()=>t?"secondary":"ghost",[t]);return N.jsx(qe,{className:Ge("DigitalClockSectionItem",i),disableTouchRipple:!0,disabled:n,selected:t,...r,children:N.jsx(Be,{size:"small",variant:l,disabled:n,children:e})})};try{ae.displayName="DigitalClockSectionItem",ae.__docgenInfo={description:"",displayName:"DigitalClockSectionItem",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},selected:{defaultValue:null,description:"",name:"selected",required:!1,type:{name:"boolean"}}}}}catch{}export{ae as D,vt as M,Mt as m,Ye as u};
