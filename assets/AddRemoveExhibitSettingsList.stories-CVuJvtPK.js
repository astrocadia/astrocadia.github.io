import{j as p}from"./jsx-runtime-4WDyTGeM.js";import{r as _}from"./index-Dl6G-zuu.js";import{T as K}from"./ThemeProviderWrapper-uQhE3vfQ.js";import{i as x,a as L,M as k}from"./exhibitManifest-ppDTbDFq.js";import{i as c}from"./lang-BqISUGWn.js";import{B as Q,a as A}from"./BreadcrumbItem-D7p3tTE6.js";import{f as U}from"./exhibit-DJJJjNfr.js";import{a as f,b as H}from"./sorting-DnE3dIQc.js";import{L as J,E as P}from"./ExhibitSettingBlockCheckbox-zZzmfqy0.js";import{c as X}from"./index-eOQoo3sK.js";import{O as Y}from"./lang-CZkjQhuG.js";import{t as Z}from"./WarningIcon-YBpYPasA.js";import"./EditIcon-BPFrJ5Yh.js";import"./LinkIcon-BD5TNNoh.js";import"./SvgIcon-C116lwZp.js";import{M as tt}from"./MainPanelCoplanarSubpageBlockCheckbox-B5qDC4Up.js";import"./react-is.production.min-DUDD-a5e.js";import"./styled-DaAyEikA.js";import"./createSvgIcon-DWxpDd4T.js";import"./SvgIcon-d6V0mnb4.js";import"./ButtonBase-gXIT4mbS.js";import"./useTimeout-B4b6mSVs.js";import"./TransitionGroupContext-xAci1nHd.js";import"./useForkRef-BDoLG09A.js";import"./useIsFocusVisible-NzCoqL_q.js";import"./Typography-n3eyoqZV.js";import"./useSlotProps-DeMrnH46.js";import"./mergeSlotProps-Dc5z_XIy.js";import"./isHostComponent-DVu5iVWx.js";import"./eventHelpers-DNy-jsQX.js";import"./api-CCwLZuzR.js";import"./index-DT9bQTP5.js";import"./index-B8_SLiQy.js";import"./store-y-FlLsSz.js";import"./sort-BNrymFaU.js";import"./MainPanelCoplanarSubpageCard-3haKLyWS.js";import"./CardContent-dRcBLWpc.js";import"./MainPanelCoplanarSubpageBlockRow-Cy-YFOCa.js";import"./Card-BqSBDNBC.js";import"./Paper-B6pP1Hjl.js";import"./MainPanelCoplanarSubpageCardHeader-jH2eOw5R.js";import"./Badge-B5h4WNES.js";import"./CountBadge-3ANCZLmo.js";import"./WarningIconBadge-D5uJWWbx.js";import"./IconButton-BDZtzWmg.js";import"./IconButton-BRjw76_K.js";import"./Tooltip-CSQNJ7MT.js";import"./useTheme-CYpYpbD_.js";import"./ownerDocument-DW-IO8s5.js";import"./Portal-3LY7w8wx.js";import"./index-CmOK7BR8.js";import"./useControlled-1Y2rT-1r.js";import"./useId-BkqTTtmk.js";import"./Grow-CF8DuDB2.js";import"./utils-Dh94M0rq.js";import"./DialogTitle-D_hGDQYf.js";import"./useMobileMediaQuery-DuF0AuJt.js";import"./useMediaQuery-CDF-4tKz.js";import"./Modal-_7pSkSOU.js";import"./Fade-Baf6ytQl.js";import"./getScrollbarSize-Bqq2hMjQ.js";import"./ownerWindow-BN2rbQ_G.js";import"./createChainedFunction-BO_9K8Jh.js";import"./DialogActions-Dq_sZO6J.js";import"./createSvgIcon-3kI-rNei.js";import"./isMuiElement-DAcuSkv2.js";import"./Button-BC5jjjI2.js";import"./Button-BYmqNiby.js";import"./useToggle-B4o7u8Ia.js";import"./GroupExhibitSettingCard-DxF21XjY.js";import"./decendentUtils-C8Fxy-xE.js";import"./LinkCard-CI8qBBEC.js";import"./index-Bu4DXql-.js";import"./Dot-B-sjopOf.js";import"./CardButton-C0EAIDJe.js";import"./ListExhibitSettingCard-SSVjPAJ8.js";import"./Checkbox-dj2lthxb.js";import"./SwitchBase-bjyHYJtY.js";import"./useFormControl-f2Zb6bR-.js";const et=(t,r=!0)=>{const[o,e]=_.useState([]),l=_.useMemo(()=>{var s;if(t){const n=(s=o.at(-1))==null?void 0:s.manifestId,u=n?U([...t.settingGroups,...t.settingLists],n):t;if(!n)return[...t.settings||[],...t.settingLists||[],...t.settingGroups||[],...t.strapiContent||[]].sort(f);if(x(u))return[...u.settings||[],...u.settingLists||[],...u.settingGroups||[],...u.strapiContent||[]].sort(f);if(L(u))return u}},[o,t]),a=_.useCallback((s,n)=>{e(u=>{const S=[...u];let I;return x(s)?I=s.groupDisplay:I=s.listDisplay,c(n)||(r?I=`${n} : ${I}`:S.push({manifestId:s.manifestId.split(k).slice(0,-1).join(k),label:n,isSettingListItem:!0})),S.push({manifestId:s.manifestId,label:I}),S})},[e,r]),T=_.useCallback((s,n)=>{let u=n;s.isSettingListItem&&(u-=1),u<o.length-1&&e(S=>S.slice(0,u+1))},[o,e]);return{breadcrumbs:o,setBreadcrumbs:e,sortedSettings:l,handleSettingGroupOrListSelected:a,onClickBreadcrumbItem:T}};function j(t,r,o){if(x(t)){const e=t,l=r.concat({manifestId:e.manifestId,label:e.groupDisplay}),a=[...e.settings,...e.strapiContent].sort(f);a.length>1&&o.push({breadcrumbs:l,settings:a}),[...e.settingGroups,...e.settingLists].sort(f).forEach(s=>j(s,l,o))}else{const e=t;if(e.settinglistitems.length>0){const l=r.concat({manifestId:e.manifestId,label:e.listDisplay});e.settinglistitems.forEach(a=>{it(a,l,o)})}}}function it(t,r,o){var s;const e=(s=r.at(-1))==null?void 0:s.manifestId,l=r.concat({manifestId:`${e}/"${t.listName}"`,label:t.listName,isSettingListItem:!0}),a=t.items.filter(n=>!x(n)&&!L(n)).sort(f);a.length>0&&o.push({breadcrumbs:l,settings:a}),t.items.filter(n=>x(n)||L(n)).sort(f).forEach(n=>j(n,l,o))}function st(t){const r=[],o=[...t.settings,...t.strapiContent].sort(f);o.length>0&&r.push({settings:o,breadcrumbs:[]});const e=[...t.settingGroups,...t.settingLists].sort(f);return e.length>0&&e.forEach(l=>{j(l,[],r)}),r}const N=({className:t,...r})=>p.jsx(tt,{className:X("OperatingModeSettingBlockCheckbox",t),badgeProps:{Icon:Z,variant:"circle",size:"large"},title:Y,...r});try{N.displayName="OperatingModeSettingBlockCheckbox",N.__docgenInfo={description:"",displayName:"OperatingModeSettingBlockCheckbox",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},checked:{defaultValue:null,description:"",name:"checked",required:!1,type:{name:"boolean"}}}}}catch{}const B=({settingsManifest:t,opModeChecked:r,onOpModeClick:o,selectedSettings:e,onSelectedSettingsChange:l})=>{const{breadcrumbs:a,setBreadcrumbs:T,sortedSettings:s,handleSettingGroupOrListSelected:n,onClickBreadcrumbItem:u}=et(t,!1),S=_.useMemo(()=>st(t),[t]),I=_.useMemo(()=>new Map(S.map((i,m)=>{var d;return[((d=i.breadcrumbs.at(-1))==null?void 0:d.manifestId)||"",m]})),[S]),D=_.useCallback((i,m)=>{if(x(i)||L(i))return;const d=[...e],G=i.manifestId.split(k),b=G.slice(0,-1).join(k),h=d.findIndex(g=>{var y;return G.length===1&&g.breadcrumbs.length===0||b!==""&&b===((y=g.breadcrumbs.at(-1))==null?void 0:y.manifestId)});if(h>=0){const g=d[h],y=g.settings.findIndex(C=>C.manifestId===i.manifestId);y>=0?(g.settings.splice(y,1),g.settings.length===0&&d.splice(h,1)):(g.settings.push(i),g.settings.sort(f))}else d.push({settings:[i],breadcrumbs:c(m)?[...a]:[...a,{manifestId:b,label:m,isSettingListItem:!0}]});l(d.sort((g,y)=>{var O,q;const C=I.get(((O=g.breadcrumbs.at(-1))==null?void 0:O.manifestId)||""),E=I.get(((q=y.breadcrumbs.at(-1))==null?void 0:q.manifestId)||"");return c(C)&&c(E)?0:!c(C)&&!c(E)?C-E:c(C)&&!c(E)?1:-1}))},[a,e,l,I]),w=_.useCallback(i=>{if(L(i)||x(i))return!1;const m=i.manifestId.split(k),d=m.slice(0,-1).join(k),G=e.find(b=>{var h;return m.length===1&&b.breadcrumbs.length===0||d!==""&&d===((h=b.breadcrumbs.at(-1))==null?void 0:h.manifestId)});if(!c(G)){const b=G.settings.find(h=>h.manifestId===i.manifestId);return!c(b)}return!1},[e]);return p.jsxs(p.Fragment,{children:[!!a.length&&p.jsx("div",{className:"AddRemoveExhibitSettingsList__breadCrumbsWrapper",children:p.jsxs(Q,{children:[p.jsx(A,{label:"All",onClick:()=>T([])}),a.map((i,m)=>p.jsx(A,{label:i.label,onClick:()=>u(i,m)},i.manifestId))]})}),p.jsxs("div",{className:"AddRemoveExhibitSettingsList__settingWrapper",children:[a.length===0&&t.opMode!==null&&p.jsx(N,{checked:r,onClick:o}),L(s)?H(s.order,s.settinglistitems).map((i,m)=>p.jsx(J,{listName:i.listName,items:i.items,exhibitId:s.ExhibitId,settingListId:s.id,manifestId:s.manifestId,hideDelete:!0,settingListItemIndex:m,renderSetting:d=>p.jsx(P,{setting:d,onClick:()=>D(d,i.listName),onSelect:()=>n(d,i.listName),checked:w(d),selectedSettings:e},`settingCheckbox-${d.manifestId}`)},`settingListItem-${i.listName}`)):s==null?void 0:s.map(i=>p.jsx(P,{setting:i,onClick:()=>D(i),onSelect:n,checked:w(i),selectedSettings:e},`settingCheckbox-${i.manifestId}`))]})]})};try{B.displayName="AddRemoveExhibitSettingsList",B.__docgenInfo={description:"",displayName:"AddRemoveExhibitSettingsList",props:{settingsManifest:{defaultValue:null,description:"",name:"settingsManifest",required:!0,type:{name:"ExhibitSettingsManifest"}},opModeChecked:{defaultValue:null,description:"",name:"opModeChecked",required:!0,type:{name:"boolean"}},onOpModeClick:{defaultValue:null,description:"",name:"onOpModeClick",required:!0,type:{name:"() => void"}},selectedSettings:{defaultValue:null,description:"",name:"selectedSettings",required:!0,type:{name:"FlattenedSettingsBlock[]"}},onSelectedSettingsChange:{defaultValue:null,description:"",name:"onSelectedSettingsChange",required:!0,type:{name:"(selectedControls: FlattenedSettingsBlock[]) => void"}}}}}catch{}const ve={title:"Design System/Composite Components/Exhibit Scheduling/AddRemoveExhibitSettingsList",decorators:[t=>p.jsx(K,{children:p.jsx(t,{})})],tags:["autodocs"],component:B,parameters:{design:{type:"figma",url:"https://www.figma.com/design/ObQmdiOj0v670OEemKDmhU/Exhibit-Settings?node-id=2196-34&m=dev"}},args:{settingsManifest:{opMode:"Off",settings:[{id:1997,manifestId:"test_gumband_setting",exhibitId:206,type:"Dropdown",display:"Test Gumband Setting",value:"3",default:"1",order:1,touchless:null,listId:null,groupId:null,items:[{id:"1",uniqueId:2159,display:"01",order:null},{id:"2",uniqueId:2160,display:"02",order:null},{id:"3",uniqueId:2161,display:"03",order:null}],read:!0,write:!0}],settingLists:[{id:89,ExhibitId:206,manifestId:"test_setting_list",listDisplay:"Test Setting List",listParent:null,schema:[{id:"test_gumband_setting_list_setting",display:"Test SettingList Setting",type:"IntegerInput"},{id:"test_nested_setting_list",type:"SettingsList",display:"Test Setting List",schema:[{id:"test_nested_gumband_setting_list_setting",display:"Test SettingList Setting",type:"IntegerInput"}]}],listItemCount:1,order:["Test Item"],orderSelf:3,groupId:null,settinglistitems:[{listName:"Test Item",items:[{id:4720,manifestId:'test_setting_list/"Test Item"/test_gumband_setting_list_setting',exhibitId:206,type:"IntegerInput",display:"Test SettingList Setting",value:60,default:"60",order:1,touchless:null,listId:89,groupId:null,items:[],read:!0,write:!0},{id:222,ExhibitId:206,manifestId:'test_setting_list/"Test Item"/test_nested_setting_list',listDisplay:"Test Setting List",listParent:89,schema:[{id:"test_nested_gumband_setting_list_setting",display:"Test SettingList Setting",type:"IntegerInput"}],listItemCount:1,order:["test nested item"],orderSelf:null,groupId:null,settinglistitems:[{listName:"test nested item",items:[{id:4722,manifestId:'test_setting_list/"Test Item"/test_nested_setting_list/"test nested item"/test_nested_gumband_setting_list_setting',exhibitId:206,type:"IntegerInput",display:"Test SettingList Setting",value:60,default:"60",order:1,touchless:null,listId:222,groupId:null,items:[],read:!0,write:!0}]}],type:"SettingsList"}]}],type:"SettingsList"}],settingGroups:[{id:43,ExhibitId:206,manifestId:"test_setting_group",groupDisplay:"Test Setting Group",listId:null,groupParent:null,schema:[{id:"test_gumband_setting_group_setting",display:"Test SettingGroup Setting",type:"IntegerInput"},{id:"test_gumband_setting_group_setting_2",display:"Test SettingGroup Setting @",type:"Toggle"},{id:"test_setting_group_nested_setting_list",type:"SettingsList",display:"Test SettingGroup Setting List",schema:[{id:"test_nested_gumband_setting_group_setting_list_setting",display:"Test SettingList Setting",type:"IntegerInput"}]}],groupItemCount:0,order:4,settings:[{id:1994,manifestId:"test_setting_group/test_gumband_setting_group_setting",exhibitId:206,type:"IntegerInput",display:"Test SettingGroup Setting",value:64,default:"60",order:1,touchless:null,listId:null,groupId:43,items:[],read:!0,write:!0},{id:2016,manifestId:"test_setting_group/test_gumband_setting_group_setting_2",exhibitId:206,type:"Toggle",display:"Test SettingGroup Setting 2",value:"true",default:"true",order:1,touchless:null,listId:null,groupId:43,items:[],read:!0,write:!0}],strapiContent:[],type:"SettingsGroup",settingGroups:[{id:44,ExhibitId:206,manifestId:"test_setting_group/test_nested_setting_group",groupDisplay:"Test Nested Setting Group",listId:null,groupParent:43,schema:[{id:"test_gumband_nested_setting_group_setting",display:"Test SettingGroup Setting",type:"IntegerInput"}],groupItemCount:0,order:4,settings:[{id:1996,manifestId:"test_setting_group/test_nested_setting_group/test_gumband_nested_setting_group_setting",exhibitId:206,type:"IntegerInput",display:"Test SettingGroup Setting",value:60,default:"60",order:1,touchless:null,listId:null,groupId:44,items:[],read:!0,write:!0}],strapiContent:[],type:"SettingsGroup",settingGroups:[],settingLists:[]}],settingLists:[{id:90,ExhibitId:206,manifestId:"test_setting_group/test_setting_group_nested_setting_list",listDisplay:"Test SettingGroup Setting List",listParent:null,schema:[{id:"test_nested_gumband_setting_group_setting_list_setting",display:"Test SettingList Setting",type:"IntegerInput"}],listItemCount:1,order:["Test Item"],orderSelf:3,groupId:43,settinglistitems:[{listName:"Test Item",items:[{id:4721,manifestId:'test_setting_group/test_setting_group_nested_setting_list/"Test Item"/test_nested_gumband_setting_group_setting_list_setting',exhibitId:206,type:"IntegerInput",display:"Test SettingList Setting",value:60,default:"60",order:1,touchless:null,listId:90,groupId:null,items:[],read:!0,write:!0}]}],type:"SettingsList"}]}],strapiContent:[]}},render:({...t})=>{const[r,o]=_.useState(()=>!1),[e,l]=_.useState(()=>[]);return p.jsx(B,{...t,opModeChecked:r,onOpModeClick:()=>o(!r),selectedSettings:e,onSelectedSettingsChange:l})}},v={},M={args:{settingsManifest:{opMode:null,settings:[{id:1997,manifestId:"test_gumband_setting",exhibitId:206,type:"Dropdown",display:"Test Gumband Setting",value:"3",default:"1",order:1,touchless:null,listId:null,groupId:null,items:[{id:"1",uniqueId:2159,display:"01",order:null},{id:"2",uniqueId:2160,display:"02",order:null},{id:"3",uniqueId:2161,display:"03",order:null}],read:!0,write:!0}],settingLists:[],settingGroups:[],strapiContent:[]}}};var R,V,F;v.parameters={...v.parameters,docs:{...(R=v.parameters)==null?void 0:R.docs,source:{originalSource:"{}",...(F=(V=v.parameters)==null?void 0:V.docs)==null?void 0:F.source}}};var $,W,z;M.parameters={...M.parameters,docs:{...($=M.parameters)==null?void 0:$.docs,source:{originalSource:`{
  args: {
    settingsManifest: {
      opMode: null,
      settings: [{
        id: 1997,
        manifestId: 'test_gumband_setting',
        exhibitId: 206,
        type: 'Dropdown',
        display: 'Test Gumband Setting',
        value: '3',
        default: '1',
        order: 1,
        touchless: null,
        listId: null,
        groupId: null,
        items: [{
          id: '1',
          uniqueId: 2159,
          display: '01',
          order: null
        }, {
          id: '2',
          uniqueId: 2160,
          display: '02',
          order: null
        }, {
          id: '3',
          uniqueId: 2161,
          display: '03',
          order: null
        }],
        read: true,
        write: true
      }],
      settingLists: [],
      settingGroups: [],
      strapiContent: []
    }
  }
}`,...(z=(W=M.parameters)==null?void 0:W.docs)==null?void 0:z.source}}};const Me=["Default","WithoutOpMode"];export{v as Default,M as WithoutOpMode,Me as __namedExportsOrder,ve as default};
