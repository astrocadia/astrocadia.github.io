import{j as t}from"./jsx-runtime-4WDyTGeM.js";import{r as o}from"./index-Dl6G-zuu.js";import{T as C}from"./store-DcPsTEhE.js";import{C as F}from"./CustomHardwarePropertyArrayWrapper-BVXXOkWr.js";import{A as W}from"./ActionTriggerButton-DTDzzIf-.js";import"./ControlledTextField-DVeGBoB-.js";import{T as O}from"./TextField-W3uF_ooE.js";import{I as Y}from"./IconButton-CI5pklQo.js";import{a2 as X}from"./WarningIcon-hyuTG_uV.js";import"./EditIcon-DQffeilE.js";import"./LinkIcon-CTu8-jnD.js";import"./SvgIcon-DKK2_66P.js";import"./index-Bu4DXql-.js";import{T as j}from"./ToggleSwitch-D9BUKkoI.js";import{M as G}from"./MainPanelCoplanarSubpageBlockRow-4r_Uzvw0.js";import{S as H}from"./SettingLabelWrapper-D-OOXB8v.js";import{A as $,b as v,S as z}from"./constants-nrIgCRYB.js";import{D as J}from"./Dot-B-sjopOf.js";const V=({property:a,propertyName:g,disabled:i,onSendValue:b,mutationStateAndActions:N,onAddToast:m,arraySubpage:I,onSetArraySubpage:T,onArraySubpageBack:w})=>{const[r,p]=o.useState(Array(a.arrayLength).fill(null)),[l,h]=o.useState(Array(a.arrayLength).fill(null)),[A,y]=o.useState(!1),[d,M]=o.useState(Math.min(a.arrayLength,$)),f=o.useRef(!1),{isSuccess:s,isLoading:u,resetUpdatePropertyMutation:x}=N,S=o.useCallback((n,e,c)=>{const _=c;p(U=>U.map((q,R)=>R===n?_:q??l[R])),f.current=!0},[l]),B=o.useMemo(()=>d>v?d-v:0,[d]),k=o.useMemo(()=>{const n=[];if(a.arrayLength<2)return n;for(let e=B;e<d;e++)n.push(t.jsxs("div",{className:"BooleanComponentProperty__row",children:[t.jsx(O,{className:"BooleanComponentProperty__rowIndex",placeholder:e.toString(),disabled:!0}),t.jsxs("div",{className:"BooleanComponentProperty__rowToggleContainer",children:[t.jsx("div",{className:"BooleanComponentProperty__dotContainer",children:!(l[e]===null&&r[e]===!1)&&r[e]!==null&&r[e]!==l[e]&&t.jsx(J,{color:"var(--base-color-orange-400)"})}),t.jsx(j,{className:"BooleanComponentProperty__toggle",checked:(r[e]!==null?r[e]:l[e])===!0,onChange:(c,_)=>S(e,c,_),disabled:!a.settable||i||u||s})]})]},e));return t.jsxs("div",{className:"BooleanComponentProperty__propertyValues",children:[" ",n," "]})},[i,S,u,s,B,d,r,l,a.arrayLength,a.settable]);o.useEffect(()=>{f.current||h(a.value??Array(a.arrayLength).fill(null)),y(f.current)},[a.value,a.arrayLength]);const E=o.useMemo(()=>r.some((n,e)=>!(l[e]===null&&r[e]===!1)&&n!==null&&n!==l[e]),[r,l]),P=o.useCallback(()=>{b(r.map((n,e)=>(n!==null?n:l[e])===!0))},[b,l,r]);o.useEffect(()=>{s&&(f.current=!1,a.arrayLength>1&&m(`${g} values sent`,C.SUCCESS),setTimeout(()=>{h(n=>n.map((e,c)=>(r[c]!==null?r[c]:e)===!0)),p(Array(a.arrayLength).fill(null)),y(!1),x()},z))},[s,u,r,a.arrayLength,x,m,g]);const L=o.useCallback(()=>{f.current=!1,p(Array(a.arrayLength).fill(null)),h(a.value??Array(a.arrayLength).fill(null)),y(!1)},[a.value,a.arrayLength]),D=o.useCallback(n=>{if(n.some(e=>!["true","false","t","f","0","1"].includes(e.toLowerCase()))){m("File failed to upload",C.ERROR);return}p(n.map(e=>["true","t","1"].includes(e.toLowerCase()))),m("File Uploaded",C.SUCCESS)},[p,m]);return a.arrayLength>1?t.jsx(F,{className:"BooleanComponentProperty",propertyName:g,propertyLength:a.arrayLength,propertyChanged:E,settable:a.settable,downloadData:l.map((n,e)=>r[e]??n??!1).join(","),disabled:i,loading:u,success:s,showRefreshButton:A,onRefresh:L,onSendValue:P,onUpdate:D,arraySubpage:!!I,onSetArraySubpage:T,onArraySubpageBack:w,renderedFieldsEndIndex:d,setRenderedFieldsEndIndex:M,children:k}):t.jsx(G,{className:"BooleanComponentProperty",children:t.jsxs("div",{className:"BooleanComponentProperty__labelAndActionWrapper",children:[t.jsx(H,{className:"BooleanComponentProperty__labelWrapper",changed:E,children:g}),t.jsxs("div",{className:"BooleanComponentProperty__buttonWrapper",children:[t.jsx(j,{className:"BooleanComponentProperty__toggle",checked:(r[0]!==null?r[0]:l[0])===!0,onChange:(n,e)=>S(0,n,e),disabled:!a.settable||i||u||s}),a.settable&&A&&!(u||s)&&t.jsx(Y,{onClick:L,disabled:i,children:t.jsx(X,{})}),a.settable&&t.jsx(W,{busy:u,success:s,disabled:i,onClick:P})]})]})})};try{V.displayName="BooleanComponentProperty",V.__docgenInfo={description:"",displayName:"BooleanComponentProperty",props:{property:{defaultValue:null,description:"",name:"property",required:!0,type:{name:"BooleanProperty"}},propertyName:{defaultValue:null,description:"",name:"propertyName",required:!0,type:{name:"string"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},onSendValue:{defaultValue:null,description:"",name:"onSendValue",required:!0,type:{name:"(values: (boolean | boolean[])[] | undefined) => void"}},mutationStateAndActions:{defaultValue:null,description:"",name:"mutationStateAndActions",required:!0,type:{name:"{ isLoading: boolean; isSuccess: boolean; resetUpdatePropertyMutation: () => void; }"}},onAddToast:{defaultValue:null,description:"",name:"onAddToast",required:!0,type:{name:"(message: string, type: ToastType) => void"}},arraySubpage:{defaultValue:null,description:"",name:"arraySubpage",required:!0,type:{name:"boolean"}},onSetArraySubpage:{defaultValue:null,description:"",name:"onSetArraySubpage",required:!0,type:{name:"() => void"}},onArraySubpageBack:{defaultValue:null,description:"",name:"onArraySubpageBack",required:!0,type:{name:"() => void"}}}}}catch{}export{V as B};
