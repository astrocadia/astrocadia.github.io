import{P as X}from"./index-BfyspvgH.js";import{b as t,_ as z}from"./ThemeProviderWrapper-uQhE3vfQ.js";import{r as k}from"./index-Dl6G-zuu.js";import{s as K,a as ue,b as de,c as me,f as Pe}from"./styled-DaAyEikA.js";import{g as fe,o as ke}from"./utils-LIBDN8De.js";import{c as he,b as Z,a as ee}from"./DatePickerActionBar-Ckanir8L.js";import{j as c}from"./jsx-runtime-4WDyTGeM.js";import{P as be}from"./Tooltip-CSQNJ7MT.js";import{P as xe}from"./Paper-B6pP1Hjl.js";import{u as W}from"./useForkRef-BDoLG09A.js";import{F as oe}from"./Fade-Baf6ytQl.js";import{G as ve}from"./Grow-CF8DuDB2.js";import{F as ye}from"./Modal-_7pSkSOU.js";import{u as j}from"./useSlotProps-DeMrnH46.js";import{b as Re}from"./useTimeout-B4b6mSVs.js";import{o as Y}from"./ownerDocument-DW-IO8s5.js";import{b as te,L as ne}from"./valueManagers-DQiUa3Xx.js";import{u as re}from"./useId-BkqTTtmk.js";import{b as Te}from"./InputAdornment-mWN1sDOu.js";import{I as Se}from"./IconButton-BRjw76_K.js";import{D as we}from"./PickerViewRoot-j1zuD5GA.js";import{d as Ee,e as Q,f as Ce}from"./DialogTitle-BJd4NnZ3.js";const Po=X.oneOfType([X.func,X.object]),ge=K(Ee)({[`& .${Q.container}`]:{outline:0},[`& .${Q.paper}`]:{outline:0,minWidth:we}}),Fe=K(Ce)({"&:first-of-type":{padding:0}});function Ie(o){var l,p;const{children:u,onDismiss:i,open:m,slots:n,slotProps:a}=o,e=(l=n==null?void 0:n.dialog)!=null?l:ge,r=(p=n==null?void 0:n.mobileTransition)!=null?p:oe;return c.jsx(e,t({open:m,onClose:i},a==null?void 0:a.dialog,{TransitionComponent:r,TransitionProps:a==null?void 0:a.mobileTransition,PaperComponent:n==null?void 0:n.mobilePaper,PaperProps:a==null?void 0:a.mobilePaper,children:c.jsx(Fe,{children:u})}))}function _e(o){return de("MuiPickersPopper",o)}ue("MuiPickersPopper",["root","paper"]);const Ae=["PaperComponent","popperPlacement","ownerState","children","paperSlotProps","paperClasses","onPaperClick","onPaperTouchStart"],De=o=>{const{classes:l}=o;return Pe({root:["root"],paper:["paper"]},_e,l)},$e=K(be,{name:"MuiPickersPopper",slot:"Root",overridesResolver:(o,l)=>l.root})(({theme:o})=>({zIndex:o.zIndex.modal})),Le=K(xe,{name:"MuiPickersPopper",slot:"Paper",overridesResolver:(o,l)=>l.paper})(({ownerState:o})=>t({outline:0,transformOrigin:"top center"},o.placement.includes("top")&&{transformOrigin:"bottom center"}));function je(o,l){return l.documentElement.clientWidth<o.clientX||l.documentElement.clientHeight<o.clientY}function Oe(o,l){const p=k.useRef(!1),u=k.useRef(!1),i=k.useRef(null),m=k.useRef(!1);k.useEffect(()=>{if(!o)return;function e(){m.current=!0}return document.addEventListener("mousedown",e,!0),document.addEventListener("touchstart",e,!0),()=>{document.removeEventListener("mousedown",e,!0),document.removeEventListener("touchstart",e,!0),m.current=!1}},[o]);const n=Re(e=>{if(!m.current)return;const r=u.current;u.current=!1;const s=Y(i.current);if(!i.current||"clientX"in e&&je(e,s))return;if(p.current){p.current=!1;return}let P;e.composedPath?P=e.composedPath().indexOf(i.current)>-1:P=!s.documentElement.contains(e.target)||i.current.contains(e.target),!P&&!r&&l(e)}),a=()=>{u.current=!0};return k.useEffect(()=>{if(o){const e=Y(i.current),r=()=>{p.current=!0};return e.addEventListener("touchstart",n),e.addEventListener("touchmove",r),()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchmove",r)}}},[o,n]),k.useEffect(()=>{if(o){const e=Y(i.current);return e.addEventListener("click",n),()=>{e.removeEventListener("click",n),u.current=!1}}},[o,n]),[i,a,a]}const Me=k.forwardRef((o,l)=>{const{PaperComponent:p,popperPlacement:u,ownerState:i,children:m,paperSlotProps:n,paperClasses:a,onPaperClick:e,onPaperTouchStart:r}=o,s=z(o,Ae),P=t({},i,{placement:u}),d=j({elementType:p,externalSlotProps:n,additionalProps:{tabIndex:-1,elevation:8,ref:l},className:a,ownerState:P});return c.jsx(p,t({},s,d,{onClick:h=>{var b;e(h),(b=d.onClick)==null||b.call(d,h)},onTouchStart:h=>{var b;r(h),(b=d.onTouchStart)==null||b.call(d,h)},ownerState:P,children:m}))});function Be(o){var l,p,u,i;const m=me({props:o,name:"MuiPickersPopper"}),{anchorEl:n,children:a,containerRef:e=null,shouldRestoreFocus:r,onBlur:s,onDismiss:P,open:d,role:h,placement:b,slots:x,slotProps:f,reduceAnimations:F}=m;k.useEffect(()=>{function y(L){d&&(L.key==="Escape"||L.key==="Esc")&&P()}return document.addEventListener("keydown",y),()=>{document.removeEventListener("keydown",y)}},[P,d]);const R=k.useRef(null);k.useEffect(()=>{h==="tooltip"||r&&!r()||(d?R.current=fe(document):R.current&&R.current instanceof HTMLElement&&setTimeout(()=>{R.current instanceof HTMLElement&&R.current.focus()}))},[d,h,r]);const[A,D,w]=Oe(d,s??P),$=k.useRef(null),O=W($,e),E=W(O,A),I=m,S=De(I),_=he(),C=F??_,v=y=>{y.key==="Escape"&&(y.stopPropagation(),P())},M=((l=x==null?void 0:x.desktopTransition)!=null?l:C)?oe:ve,B=(p=x==null?void 0:x.desktopTrapFocus)!=null?p:ye,V=(u=x==null?void 0:x.desktopPaper)!=null?u:Le,g=(i=x==null?void 0:x.popper)!=null?i:$e,T=j({elementType:g,externalSlotProps:f==null?void 0:f.popper,additionalProps:{transition:!0,role:h,open:d,anchorEl:n,placement:b,onKeyDown:v},className:S.root,ownerState:m});return c.jsx(g,t({},T,{children:({TransitionProps:y,placement:L})=>c.jsx(B,t({open:d,disableAutoFocus:!0,disableRestoreFocus:!0,disableEnforceFocus:h==="tooltip",isEnabled:()=>!0},f==null?void 0:f.desktopTrapFocus,{children:c.jsx(M,t({},y,f==null?void 0:f.desktopTransition,{children:c.jsx(Me,{PaperComponent:V,ownerState:I,popperPlacement:L,ref:E,onPaperClick:D,onPaperTouchStart:w,paperClasses:S.paper,paperSlotProps:f==null?void 0:f.desktopPaper,children:a})}))}))}))}const Ve=["props","getOpenDialogAriaText"],He=["ownerState"],Ue=["ownerState"],fo=o=>{var l,p,u,i,m;let{props:n,getOpenDialogAriaText:a}=o,e=z(o,Ve);const{slots:r,slotProps:s,className:P,sx:d,format:h,formatDensity:b,timezone:x,label:f,inputRef:F,readOnly:R,disabled:A,autoFocus:D,localeText:w,reduceAnimations:$}=n,O=te(),E=k.useRef(null),I=k.useRef(null),S=re(),_=(l=s==null||(p=s.toolbar)==null?void 0:p.hidden)!=null?l:!1,{open:C,actions:v,hasUIView:M,layoutProps:B,renderCurrentView:V,shouldRestoreFocus:g,fieldProps:T}=Z(t({},e,{props:n,inputRef:E,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"desktop"})),y=(u=r.inputAdornment)!=null?u:Te,L=j({elementType:y,externalSlotProps:s==null?void 0:s.inputAdornment,additionalProps:{position:"end"},ownerState:n}),N=z(L,He),q=(i=r.openPickerButton)!=null?i:Se,se=j({elementType:q,externalSlotProps:s==null?void 0:s.openPickerButton,additionalProps:{disabled:A||R,onClick:C?v.onClose:v.onOpen,"aria-label":a(T.value,O),edge:N.position},ownerState:n}),le=z(se,Ue),ie=r.openPickerIcon,J=r.field,H=j({elementType:J,externalSlotProps:s==null?void 0:s.field,additionalProps:t({},T,_&&{id:S},{readOnly:R,disabled:A,className:P,sx:d,format:h,formatDensity:b,timezone:x,label:f,autoFocus:D&&!n.open,focused:C?!0:void 0}),ownerState:n});M&&(H.InputProps=t({},H.InputProps,{ref:I,[`${N.position}Adornment`]:c.jsx(y,t({},N,{children:c.jsx(q,t({},le,{children:c.jsx(ie,t({},s==null?void 0:s.openPickerIcon))}))}))}));const ae=t({textField:r.textField,clearIcon:r.clearIcon,clearButton:r.clearButton},H.slots),pe=(m=r.layout)!=null?m:ee,ce=W(E,H.inputRef,F);let G=S;_&&(f?G=`${S}-label`:G=void 0);const U=t({},s,{toolbar:t({},s==null?void 0:s.toolbar,{titleId:S}),popper:t({"aria-labelledby":G},s==null?void 0:s.popper)});return{renderPicker:()=>c.jsxs(ne,{localeText:w,children:[c.jsx(J,t({},H,{slots:ae,slotProps:U,inputRef:ce})),c.jsx(Be,t({role:"dialog",placement:"bottom-start",anchorEl:I.current},v,{open:C,slots:r,slotProps:U,shouldRestoreFocus:g,reduceAnimations:$,children:c.jsx(pe,t({},B,U==null?void 0:U.layout,{slots:r,slotProps:U,children:V()}))}))]})}},ze=["props","getOpenDialogAriaText"],ko=o=>{var l,p,u;let{props:i,getOpenDialogAriaText:m}=o,n=z(o,ze);const{slots:a,slotProps:e,className:r,sx:s,format:P,formatDensity:d,timezone:h,label:b,inputRef:x,readOnly:f,disabled:F,localeText:R}=i,A=te(),D=k.useRef(null),w=re(),$=(l=e==null||(p=e.toolbar)==null?void 0:p.hidden)!=null?l:!1,{open:O,actions:E,layoutProps:I,renderCurrentView:S,fieldProps:_}=Z(t({},n,{props:i,inputRef:D,autoFocusView:!0,additionalViewProps:{},wrapperVariant:"mobile"})),C=a.field,v=j({elementType:C,externalSlotProps:e==null?void 0:e.field,additionalProps:t({},_,$&&{id:w},!(F||f)&&{onClick:E.onOpen,onKeyDown:ke(E.onOpen)},{readOnly:f??!0,disabled:F,className:r,sx:s,format:P,formatDensity:d,timezone:h,label:b}),ownerState:i});v.inputProps=t({},v.inputProps,{"aria-label":m(_.value,A)});const M=t({textField:a.textField},v.slots),B=(u=a.layout)!=null?u:ee,V=W(D,v.inputRef,x);let g=w;$&&(b?g=`${w}-label`:g=void 0);const T=t({},e,{toolbar:t({},e==null?void 0:e.toolbar,{titleId:w}),mobilePaper:t({"aria-labelledby":g},e==null?void 0:e.mobilePaper)});return{renderPicker:()=>c.jsxs(ne,{localeText:R,children:[c.jsx(C,t({},v,{slots:M,slotProps:T,inputRef:V})),c.jsx(Ie,t({},E,{open:O,slots:a,slotProps:T,children:c.jsx(B,t({},I,T==null?void 0:T.layout,{slots:a,slotProps:T,children:S()}))}))]})}};export{ko as a,Po as r,fo as u};
