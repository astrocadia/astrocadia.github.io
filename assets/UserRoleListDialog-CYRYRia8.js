import{j as t}from"./jsx-runtime-4WDyTGeM.js";import{r as e}from"./index-Dl6G-zuu.js";import{c as H}from"./index-eOQoo3sK.js";import{D as P,a as Y,b as W,c as z}from"./DialogTitle-BOC1lOt5.js";import{U as J}from"./UserInviteInputField-CFuwBBje.js";import{U as K}from"./UserRoleList-BKv37LRx.js";import{A as Q}from"./WarningIcon-6HpPPylF.js";import"./EditIcon-bNkpr5Ld.js";import"./LinkIcon-CKhuJxKk.js";import"./SvgIcon-76a5Fjoi.js";import{I as X}from"./IconButton-DYHDsDKu.js";import{R as Z}from"./RadioButtonGroup-j0sUxXSE.js";import{B as S}from"./Button-CxrygEYf.js";const n={INVITE:"invite",LIST:"list"},V="list",ee=" (your role)",te="Assign Role",ie="Cancel",se="Invite",ne=500,ae=[{role:"manager",title:"Manager",subtitle:"Manage audience facing exhibits and view metrics"},{role:"developer",title:"Developer",subtitle:"Build, manage and troubleshoot exhibit backend, including software and hardware components"}],g=e.memo(({open:R,onClose:d,users:a,roles:b=ae,currentUserId:c,onRoleChange:j,onInviteUser:U,onRemoveUser:N,inviteTitle:E,inviteSubtitle:h,listTitle:_,listSubtitle:y,className:k})=>{const[s,m]=e.useState(V),[L,r]=e.useState(!1),[q,p]=e.useState(!1),[l,x]=e.useState(""),[o,D]=e.useState(void 0),M=e.useMemo(()=>a.map(i=>i.email),[a]),T=e.useMemo(()=>({invite:{title:E,subtitle:h},list:{title:_,subtitle:y}}),[E,h,_,y]),C=e.useMemo(()=>T[s],[s,T]),u=e.useMemo(()=>a.find(i=>i.userId===c),[a,c]),A=e.useMemo(()=>b.map(i=>{const F=(u==null?void 0:u.role)===i.role?`${i.title}${ee}`:i.title;return{value:i.role,title:F,description:i.subtitle}}),[b,u]),v=e.useMemo(()=>!!l&&s==="invite"&&L,[l,s,L]),f=e.useMemo(()=>v&&!!o,[v,o]),I=e.useCallback(()=>{m(V),p(!1),r(!1),x(""),D(void 0)},[]),B=e.useMemo(()=>{if(s===n.LIST)return d},[s,d]),O=e.useCallback(()=>{m(n.LIST),r(!1)},[]),w=e.useCallback(i=>{x(i),i||r(!1)},[]),G=e.useCallback(()=>{m("invite"),r(!0)},[]),$=e.useCallback(async()=>{f&&(p(!0),await U(l,o),p(!1),setTimeout(()=>{I()},ne))},[f,l,o,U,I]);return t.jsxs(P,{className:H("UserRoleListDialog",`UserRoleListDialog__mode__${s}`,k),open:R,onClose:d,children:[t.jsxs("div",{children:[s===n.INVITE&&t.jsx(X,{className:"UserRoleListDialog__backButton",onClick:O,variant:"ghost","aria-label":"back",children:t.jsx(Q,{})}),t.jsx(Y,{title:C.title,subTitle:C.subtitle,onClose:B})]}),t.jsxs(W,{children:[t.jsx(J,{currentUserEmails:M,activeEmail:l,setActiveEmail:w,isInviteActive:v,onInvite:G}),s===n.LIST&&t.jsx(K,{users:a,currentUserId:c,onRoleChange:j,onRemoveUser:N}),s===n.INVITE&&t.jsxs("div",{children:[t.jsx("div",{className:"UserRoleListDialog__caption",children:te}),t.jsx(Z,{options:A,onChange:D,value:o})]})]}),s===n.INVITE&&t.jsxs(z,{children:[t.jsx(S,{variant:"primary",onClick:I,children:ie}),t.jsx(S,{variant:"secondary",onClick:$,disabled:!f||q,children:se})]})]})});g.displayName="UserRoleListDialog";try{g.displayName="UserRoleListDialog",g.__docgenInfo={description:"",displayName:"UserRoleListDialog",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},onRoleChange:{defaultValue:null,description:"",name:"onRoleChange",required:!0,type:{name:"(userId: number, role: UserRole) => void"}},onRemoveUser:{defaultValue:null,description:"",name:"onRemoveUser",required:!0,type:{name:"(userId: number) => void"}},onInviteUser:{defaultValue:null,description:"",name:"onInviteUser",required:!0,type:{name:"(email: string, role: UserRole) => Promise<unknown>"}},users:{defaultValue:null,description:"",name:"users",required:!0,type:{name:"EntityUser[]"}},roles:{defaultValue:null,description:"",name:"roles",required:!1,type:{name:"UserRoleWithTitles[]"}},inviteTitle:{defaultValue:null,description:"",name:"inviteTitle",required:!0,type:{name:"string"}},inviteSubtitle:{defaultValue:null,description:"",name:"inviteSubtitle",required:!0,type:{name:"string"}},listTitle:{defaultValue:null,description:"",name:"listTitle",required:!0,type:{name:"string"}},listSubtitle:{defaultValue:null,description:"",name:"listSubtitle",required:!0,type:{name:"string"}},currentUserId:{defaultValue:null,description:"",name:"currentUserId",required:!0,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}}}catch{}export{g as U};
